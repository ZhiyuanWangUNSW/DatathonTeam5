---
title: "Datathon"
author: "ZhiyuanWang"
date: "2024-12-01"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown
```{r package}
library(dplyr)
library(janitor)
```
This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
file_path<-"I:\\UNSW\\Datatahon_extracted_dataset.csv"
epi_data<-read.csv(file_path)
epi_data<-clean_names(epi_data)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
head(epi_data)
summary(epi_data)
```

```{r missing check }
head(epi_data)
missing_summary <- epi_data %>%
  summarise(across(everything(), ~ sum(is.na(.))))
print("Number of missing values in each column:")
print(missing_summary)
```

```{r }
variable_name <- "country"

# Calculate the frequency
table(epi_data$country)

```
```{r fake data generator}
set.seed(42)

# Define parameters
n <- 500  # Number of rows in the dataset
countries <- c("USA", "India", "China", "Brazil", "Australia")
syndromes <- c("Respiratory", "Gastrointestinal", "Neurological", "Skin", "Other")
pandemic_types <- c("Flu", "Cholera", "SARS", "Zika", "COVID", "Ebola", "Other")

# Generate fake dataset
fake_data <- tibble(
  Country = sample(countries, n, replace = TRUE),
  Date = as.Date("2024-01-01") + sample(0:364, n, replace = TRUE),  # Random dates within 2024
  Case_Name = paste0("Case_", sample(LETTERS, n, replace = TRUE)),
  Syndrome = sample(syndromes, n, replace = TRUE),
  Death_Number = sample(0:50, n, replace = TRUE),  # Death numbers between 0 and 50
  Case_Number = sample(50:1000, n, replace = TRUE),  # Case numbers between 50 and 1000
  Pandemic_Type = sample(pandemic_types, n, replace = TRUE)
)

# Preview the dataset
print(fake_data)

write.csv(fake_data, "fake_pandemic_data.csv", row.names = FALSE)

```
```{r model}
library(forecast)

# Aggregate case numbers by date for a univariate time series
time_series_data <- fake_data %>%
  group_by(Date) %>%
  summarise(Cases = sum(Case_Number)) %>%
  ungroup()

# Convert to time-series object
ts_data <- ts(time_series_data$Cases, frequency = 365)

# Fit ARIMA model
arima_model <- auto.arima(ts_data)

# Forecast future cases
forecast_data <- forecast(arima_model, h = 30)
plot(forecast_data)

```

